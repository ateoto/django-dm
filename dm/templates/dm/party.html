{% extends "dm/base.html" %}
{% load staticfiles %}
{% block js %}
<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script src="{% static "dm/js/dm.js" %}"></script>
{% endblock %}
{% block content %}
<div class="container">
    <ul id="party" class="thumbnails" party-id="{{ party.id }}">
    {% for c in party.characters.all %}
        <li id="character-{{ c.id }}" class="character-block span4" character-id="{{ c.id }}">
            <div class="thumbnail">
                <h3>{{ c.name }}<small class="character-header-info">Level {{ c.current_level.number }} {{ c.race.name }} {{ c.class_type.name }}</small></h3>
                HP: <span id="hp-text-{{ c.id }}">{{ c.hit_points }}</span>
                /
                <span id="max-hp-text-{{ c.id }}">{{ c.max_hit_points }}</span>
                <br>
                <span class="defenses">
                    {% with defenses=c.get_defenses %}
                    AC: <span id="ac-text-{{ c.id }}">{{ defenses.ac.total }}</span>, 
                    Fort: <span id="fort-text-{{ c.id }}">{{ defenses.fort.total }}</span>, 
                    Reflex: <span id="ref-text-{{ c.id }}">{{ defenses.ref.total }}</span>, 
                    Will: <span id="will-text-{{ c.id }}">{{ defenses.will.total }}</span>
                    {% endwith %}
                </span>
                <br>
                <div class="row">
                {% for ability in c.abilities.all %}
                    <span class="span1">
                        {{ ability.ability.abbreviation }}: {{ ability.check }}
                    </span>
                {% endfor %}
                </div>
            </div>
        </li>
    {% endfor %}
    </ul>
    <div id="hp-modal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="hp-modal-label" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3 id="hp-modal-label">Modal header</h3>
        </div>
        <div class="modal-body">
                <div class="control-group">
                    <div class="controls">
                        <div class="input-prepend input-append">
                            <button id="hp-min-btn" class="btn" type="button">Min</button>
                            <input id="hp-input" class="span2" id="appendedPrependedInput" type="text">
                            <button id="hp-max-btn" class="btn" type="button">Max</button>
                        </div>
                    </div>
                </div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button id="hp-modal-save" class="btn btn-primary">Save changes</button>
        </div>
    </div>
    {% csrf_token %}
</div>
{% endblock %}